apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "idc-common.fullname" . }}
  namespace: {{ include "idc-common.namespace" . }}  
data:
  config.yaml: |
    listenPort: {{ include "idc-common.listenPort" . }}
    database:
      url: {{ include "idc-common.db-url" . }}
      usernameFile: /vault/secrets/db_username
      passwordFile: /vault/secrets/db_password
    cloudaccountServerAddr: {{ .Values.cloudaccountServerAddr | quote }}
    computeAPIServerAddr: {{ .Values.computeAPIServerAddr | quote }}
    storageKmsServerAddr: {{ .Values.storageKmsServerAddr | quote }}
    cloudAccountQuota: {{ .Values.cloudAccountQuota | toJson }}
    productcatalogServerAddr: {{ .Values.productcatalogServerAddr | quote }}
    authzServerAddr: {{ .Values.authzServerAddr | quote }}
    authzEnabled: {{ .Values.authzEnabled }}
    storageSchedulerServerAddr: {{ .Values.storageSchedulerServerAddr | toJson }}
    storageUserServerAddr: {{ .Values.storageUserServerAddr | quote }}
    quotaManagementServerAddr: {{ .Values.quotaManagementServerAddr | quote }}
    objectStoreEnabled: {{ .Values.objectStoreEnabled}}
    iksStorageEnabled: {{ .Values.iksStorageEnabled}}
    defaultBucketSizeInGB: {{ .Values.defaultBucketSizeInGB}}
    generalPurposeVASTEnabled: {{ .Values.generalPurposeVASTEnabled}}
    quotaManagementEnabled: {{ .Values.quotaManagementEnabled}}
