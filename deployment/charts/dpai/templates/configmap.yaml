apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "idc-common.fullname" . }}
  namespace: {{ include "idc-common.namespace" . }}  
data:
  config.yaml: |
    listenPort: {{ include "idc-common.listenPort" . }}
    grpcAPIServerAddr: {{ .Values.grpcAPIServerAddr | quote }}
    database:
      url: {{ include "idc-common.db-url" .}}
      usernameFile: /vault/secrets/db_username
      passwordFile: /vault/secrets/db_password
    region: {{ .Values.region }}
    defaultRegistry:
      host: {{ .Values.defaultRegistry.host }}
      username: {{ .Values.defaultRegistry.username }}
      passwordFile: /vault/secrets/default_registry_password
    encryption:
      keyFile: /vault/secrets/encryption_key
    tls:
      hwSSLProfileID: {{ .Values.tls.hwSSLProfileID }}
    dns:
      realm: {{ .Values.dns.realm }}
      dnsIpamApiEndpoint: {{ .Values.dns.dnsIpamApiEndpoint }}