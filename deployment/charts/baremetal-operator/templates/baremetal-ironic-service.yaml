{{- if not .Values.deployStandaloneBaremetalOperator -}}
apiVersion: v1
kind: Service
metadata:
  name: baremetal-operator-ironic
  annotations:
    {{- if and (eq "LoadBalancer" .Values.service.type) (.Values.ironicEnvConfigMap.ironicIP) }}
    metallb.universe.tf/loadBalancerIPs: {{ .Values.ironicEnvConfigMap.ironicIP }}
    {{- end }}
  labels:
    {{- include "baremetal-operator.labels" . | nindent 4 }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: 6180
      targetPort: 6180
      protocol: TCP
      name: ironic-http
    - port: 5050
      targetPort: 5050
      protocol: TCP
      name: ironic-inspector
    - port: 6385
      targetPort: 6385
      protocol: TCP
      name: ironic
  selector:
    name: baremetal-operator-ironic-{{ .Release.Namespace }}
{{- end }}
