---

# Network need to be created as root; primarily due
# to the restriction on creating network interfaces

- name: Block for removing vlan network
  block:
  - name: stop libvirt network for valn{{ vlan_num }}
    command: virsh net-destroy vlan{{ vlan_num }}
    register: result
    changed_when: false
    failed_when: false
  - name: undefine libvirt network for vlan{{ vlan_num }}
    command: virsh net-undefine vlan{{ vlan_num }}
    changed_when: false
    failed_when: false
  become: true
  vars:
    ansible_network_os: 'ios'
  tags: [never, teardown]
