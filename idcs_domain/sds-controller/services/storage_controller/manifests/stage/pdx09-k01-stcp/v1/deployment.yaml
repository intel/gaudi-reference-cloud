# INTEL CONFIDENTIAL
# Copyright (C) 2024 Intel Corporation
apiVersion: apps/v1
kind: Deployment
metadata:
  name: storage-controller
spec:
  template:
    metadata:
      labels:
        sidecar.istio.io/inject: "true"
    spec:
      volumes:
        - name: pdx09-storage-controller-creds
          secret:
            secretName: pdx09-storage-controller-creds
            items:
              - key: _raw
                path: pdx09-storage-controller-creds.json
        - name: pdx09-storage-controller-vast-creds
          secret:
            secretName: pdx09-storage-controller-vast-creds
            items:
              - key: _raw
                path: pdx09-storage-controller-vast-creds.json
      containers:
        - name: storage-controller
          volumeMounts:
            - name: pdx09-storage-controller-creds
              mountPath: /app/secret/pdx09-storage-controller-creds.json
              subPath: pdx09-storage-controller-creds.json
              readOnly: true
            - name: pdx09-storage-controller-vast-creds
              mountPath: /app/secret/pdx09-storage-controller-vast-creds.json
              subPath: pdx09-storage-controller-vast-creds.json
              readOnly: true
