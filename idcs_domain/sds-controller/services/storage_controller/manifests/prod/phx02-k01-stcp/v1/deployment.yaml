# INTEL CONFIDENTIAL
# Copyright (C) 2024 Intel Corporation
apiVersion: apps/v1
kind: Deployment
metadata:
  name: storage-controller
spec:
  template:
    metadata:
      labels:
        sidecar.istio.io/inject: "true"
    spec:
      volumes:
        - name: phx02-storage-controller-weka-creds
          secret:
            secretName: phx02-storage-controller-weka-creds
            items:
              - key: _raw
                path: phx02-storage-controller-weka-creds.json
        - name: phx02-storage-controller-minio-creds
          secret:
            secretName: phx02-storage-controller-minio-creds
            items:
              - key: _raw
                path: phx02-storage-controller-minio-creds.json
        - name: phx02-storage-controller-vast-creds
          secret:
            secretName: phx02-storage-controller-vast-creds
            items:
              - key: _raw
                path: phx02-storage-controller-vast-creds.json
      containers:
        - name: storage-controller
          volumeMounts:
            - name: phx02-storage-controller-weka-creds
              mountPath: /app/secret/phx02-storage-controller-weka-creds.json
              subPath: phx02-storage-controller-weka-creds.json
              readOnly: true
            - name: phx02-storage-controller-minio-creds
              mountPath: /app/secret/phx02-storage-controller-minio-creds.json
              subPath: phx02-storage-controller-minio-creds.json
              readOnly: true
            - name: phx02-storage-controller-vast-creds
              mountPath: /app/secret/phx02-storage-controller-vast-creds.json
              subPath: phx02-storage-controller-vast-creds.json
              readOnly: true
