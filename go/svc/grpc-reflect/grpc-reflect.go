// Code generated by prototempl. DO NOT EDIT.
package main

import (
	"context"
	"flag"
	"fmt"
	"log"
	"net"

	"github.com/intel-innersource/frameworks.cloud.devcloud.services.idc/go/pkg/conf"
	"github.com/intel-innersource/frameworks.cloud.devcloud.services.idc/go/pkg/grpcutil"
	_ "github.com/intel-innersource/frameworks.cloud.devcloud.services.idc/go/pkg/grpcutil/grpclog"
	"github.com/intel-innersource/frameworks.cloud.devcloud.services.idc/go/pkg/pb"

	"google.golang.org/grpc/reflection"
)

type Config struct {
	ListenPort uint16 `koanf:"listenPort"`
	Deployment string `koanf:"deployment"`
}

var addr string
var configFile string

func init() {
	flag.StringVar(&configFile, "config", "", "config file")
}

func main() {
	flag.Parse()

	if configFile == "" {
		log.Fatal("specify --config")
	}
	cfg := Config{}
	ctx := context.Background()
	if err := conf.LoadConfigFile(ctx, configFile, &cfg); err != nil {
		log.Fatalf("%v: %v", configFile, err)
	}

	listener, err := net.Listen("tcp", fmt.Sprintf(":%v", cfg.ListenPort))
	if err != nil {
		log.Fatalf("net.Listen: %v", err)
	}
	grpcServer, err := grpcutil.NewServer(ctx)
	if err != nil {
		log.Fatalf("grpcutil.NewServer: %v", err)
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterAuthzServiceServer(grpcServer, &pb.UnimplementedAuthzServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingDriverUsageServiceServer(grpcServer, &pb.UnimplementedBillingDriverUsageServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingAccountServiceServer(grpcServer, &pb.UnimplementedBillingAccountServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingOptionServiceServer(grpcServer, &pb.UnimplementedBillingOptionServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingRateServiceServer(grpcServer, &pb.UnimplementedBillingRateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingCreditServiceServer(grpcServer, &pb.UnimplementedBillingCreditServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingCouponServiceServer(grpcServer, &pb.UnimplementedBillingCouponServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingInvoiceServiceServer(grpcServer, &pb.UnimplementedBillingInvoiceServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingProductCatalogSyncServiceServer(grpcServer, &pb.UnimplementedBillingProductCatalogSyncServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterPaymentServiceServer(grpcServer, &pb.UnimplementedPaymentServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingInstancesServiceServer(grpcServer, &pb.UnimplementedBillingInstancesServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingUsageServiceServer(grpcServer, &pb.UnimplementedBillingUsageServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingOpsActionServiceServer(grpcServer, &pb.UnimplementedBillingOpsActionServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterBillingDeactivateInstancesServiceServer(grpcServer, &pb.UnimplementedBillingDeactivateInstancesServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudAccountEnrollServiceServer(grpcServer, &pb.UnimplementedCloudAccountEnrollServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudAccountServiceServer(grpcServer, &pb.UnimplementedCloudAccountServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudAccountMemberServiceServer(grpcServer, &pb.UnimplementedCloudAccountMemberServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudAccountAppClientServiceServer(grpcServer, &pb.UnimplementedCloudAccountAppClientServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterOtpServiceServer(grpcServer, &pb.UnimplementedOtpServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudAccountInvitationServiceServer(grpcServer, &pb.UnimplementedCloudAccountInvitationServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudAccountInvitationMemberServiceServer(grpcServer, &pb.UnimplementedCloudAccountInvitationMemberServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudCreditsCreditServiceServer(grpcServer, &pb.UnimplementedCloudCreditsCreditServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudCreditsCouponServiceServer(grpcServer, &pb.UnimplementedCloudCreditsCouponServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterCloudMonitorServiceServer(grpcServer, &pb.UnimplementedCloudMonitorServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterCloudMonitorLogsServiceServer(grpcServer, &pb.UnimplementedCloudMonitorLogsServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterSshPublicKeyServiceServer(grpcServer, &pb.UnimplementedSshPublicKeyServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterInstanceServiceServer(grpcServer, &pb.UnimplementedInstanceServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterInstanceGroupServiceServer(grpcServer, &pb.UnimplementedInstanceGroupServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterInstanceTypeServiceServer(grpcServer, &pb.UnimplementedInstanceTypeServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterMachineImageServiceServer(grpcServer, &pb.UnimplementedMachineImageServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterVNetServiceServer(grpcServer, &pb.UnimplementedVNetServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterLoadBalancerServiceServer(grpcServer, &pb.UnimplementedLoadBalancerServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterInstancePrivateServiceServer(grpcServer, &pb.UnimplementedInstancePrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterInstanceGroupPrivateServiceServer(grpcServer, &pb.UnimplementedInstanceGroupPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterInstanceSchedulingServiceServer(grpcServer, &pb.UnimplementedInstanceSchedulingServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterIpResourceManagerServiceServer(grpcServer, &pb.UnimplementedIpResourceManagerServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterVNetPrivateServiceServer(grpcServer, &pb.UnimplementedVNetPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterLoadBalancerPrivateServiceServer(grpcServer, &pb.UnimplementedLoadBalancerPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterConsoleInvoiceServiceServer(grpcServer, &pb.UnimplementedConsoleInvoiceServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiAirflowSizeServiceServer(grpcServer, &pb.UnimplementedDpaiAirflowSizeServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiAirflowVersionServiceServer(grpcServer, &pb.UnimplementedDpaiAirflowVersionServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiAirflowConfServiceServer(grpcServer, &pb.UnimplementedDpaiAirflowConfServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiAirflowServiceServer(grpcServer, &pb.UnimplementedDpaiAirflowServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiDeploymentServiceServer(grpcServer, &pb.UnimplementedDpaiDeploymentServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiDeploymentTaskServiceServer(grpcServer, &pb.UnimplementedDpaiDeploymentTaskServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiHmsConfGroupServiceServer(grpcServer, &pb.UnimplementedDpaiHmsConfGroupServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiHmsConfServiceServer(grpcServer, &pb.UnimplementedDpaiHmsConfServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiHmsSizeServiceServer(grpcServer, &pb.UnimplementedDpaiHmsSizeServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiHmsVersionServiceServer(grpcServer, &pb.UnimplementedDpaiHmsVersionServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiHmsServiceServer(grpcServer, &pb.UnimplementedDpaiHmsServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiPostgresSizeServiceServer(grpcServer, &pb.UnimplementedDpaiPostgresSizeServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiPostgresVersionServiceServer(grpcServer, &pb.UnimplementedDpaiPostgresVersionServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiPostgresServiceServer(grpcServer, &pb.UnimplementedDpaiPostgresServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDpaiWorkspaceServiceServer(grpcServer, &pb.UnimplementedDpaiWorkspaceServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterFleetAdminServiceServer(grpcServer, &pb.UnimplementedFleetAdminServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterFleetAdminUIServiceServer(grpcServer, &pb.UnimplementedFleetAdminUIServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterIksServer(grpcServer, &pb.UnimplementedIksServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterIksSuperComputeServer(grpcServer, &pb.UnimplementedIksSuperComputeServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterIksAdminServer(grpcServer, &pb.UnimplementedIksAdminServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterIksPrivateReconcilerServer(grpcServer, &pb.UnimplementedIksPrivateReconcilerServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterDispatcherServer(grpcServer, &pb.UnimplementedDispatcherServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterTextGeneratorServer(grpcServer, &pb.UnimplementedTextGeneratorServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterKFServiceServer(grpcServer, &pb.UnimplementedKFServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterMaasGatewayServer(grpcServer, &pb.UnimplementedMaasGatewayServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterMeteringServiceServer(grpcServer, &pb.UnimplementedMeteringServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterAddressTranslationPrivateServiceServer(grpcServer, &pb.UnimplementedAddressTranslationPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterGlobalOperationsServiceServer(grpcServer, &pb.UnimplementedGlobalOperationsServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterIPRMPrivateServiceServer(grpcServer, &pb.UnimplementedIPRMPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterSubnetServiceServer(grpcServer, &pb.UnimplementedSubnetServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterSubnetPrivateServiceServer(grpcServer, &pb.UnimplementedSubnetPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterVPCServiceServer(grpcServer, &pb.UnimplementedVPCServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterVPCPrivateServiceServer(grpcServer, &pb.UnimplementedVPCPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterNotificationGatewayServiceServer(grpcServer, &pb.UnimplementedNotificationGatewayServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterEmailNotificationServiceServer(grpcServer, &pb.UnimplementedEmailNotificationServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterProductVendorServiceServer(grpcServer, &pb.UnimplementedProductVendorServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterProductCatalogServiceServer(grpcServer, &pb.UnimplementedProductCatalogServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterProductAccessServiceServer(grpcServer, &pb.UnimplementedProductAccessServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterRegionServiceServer(grpcServer, &pb.UnimplementedRegionServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterRegionAccessServiceServer(grpcServer, &pb.UnimplementedRegionAccessServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterProductSyncServiceServer(grpcServer, &pb.UnimplementedProductSyncServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterVendorSyncServiceServer(grpcServer, &pb.UnimplementedVendorSyncServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterFamilyServiceServer(grpcServer, &pb.UnimplementedFamilyServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterVendorServiceServer(grpcServer, &pb.UnimplementedVendorServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterProductCatalogServiceV2Server(grpcServer, &pb.UnimplementedProductCatalogServiceV2Server{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterAccessServiceServer(grpcServer, &pb.UnimplementedAccessServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterProductChangeRequestServiceServer(grpcServer, &pb.UnimplementedProductChangeRequestServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterProductInterestServiceServer(grpcServer, &pb.UnimplementedProductInterestServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterQuotaManagementPrivateServiceServer(grpcServer, &pb.UnimplementedQuotaManagementPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterQuotaManagementServiceServer(grpcServer, &pb.UnimplementedQuotaManagementServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterSecurityInsightsServer(grpcServer, &pb.UnimplementedSecurityInsightsServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterFileStorageServiceServer(grpcServer, &pb.UnimplementedFileStorageServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterObjectStorageServiceServer(grpcServer, &pb.UnimplementedObjectStorageServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterStorageAdminServiceServer(grpcServer, &pb.UnimplementedStorageAdminServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterStorageKMSPrivateServiceServer(grpcServer, &pb.UnimplementedStorageKMSPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterFilesystemPrivateServiceServer(grpcServer, &pb.UnimplementedFilesystemPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterFilesystemSchedulerPrivateServiceServer(grpcServer, &pb.UnimplementedFilesystemSchedulerPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterFilesystemUserPrivateServiceServer(grpcServer, &pb.UnimplementedFilesystemUserPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterFilesystemStorageClusterPrivateServiceServer(grpcServer, &pb.UnimplementedFilesystemStorageClusterPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterWekaStatefulAgentPrivateServiceServer(grpcServer, &pb.UnimplementedWekaStatefulAgentPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterBucketUserPrivateServiceServer(grpcServer, &pb.UnimplementedBucketUserPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterFilesystemOrgPrivateServiceServer(grpcServer, &pb.UnimplementedFilesystemOrgPrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterObjectStorageServicePrivateServer(grpcServer, &pb.UnimplementedObjectStorageServicePrivateServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterBucketLifecyclePrivateServiceServer(grpcServer, &pb.UnimplementedBucketLifecyclePrivateServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterTrainingClusterServiceServer(grpcServer, &pb.UnimplementedTrainingClusterServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "regional" {
		pb.RegisterTrainingBatchUserServiceServer(grpcServer, &pb.UnimplementedTrainingBatchUserServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterUsageServiceServer(grpcServer, &pb.UnimplementedUsageServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterUsageRecordServiceServer(grpcServer, &pb.UnimplementedUsageRecordServiceServer{})
	}
	if cfg.Deployment == "all" || cfg.Deployment == "global" {
		pb.RegisterUserCredentialsServiceServer(grpcServer, &pb.UnimplementedUserCredentialsServiceServer{})
	}
	reflection.Register(grpcServer)
	err = grpcServer.Serve(listener)
	if err != nil {
		log.Fatalf("grpcutil.Serve: %v", err)
	}
}
